<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GenAI NLP Intelligence Platform - Demo</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            overflow: hidden;
        }
        
        .header {
            background: linear-gradient(135deg, #4CAF50, #45a049);
            color: white;
            padding: 30px;
            text-align: center;
        }
        
        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
        }
        
        .header p {
            font-size: 1.2em;
            opacity: 0.9;
        }
        
        .nav-tabs {
            display: flex;
            background: #f8f9fa;
            border-bottom: 1px solid #dee2e6;
        }
        
        .nav-tab {
            flex: 1;
            padding: 15px;
            text-align: center;
            background: none;
            border: none;
            cursor: pointer;
            font-weight: 500;
            transition: all 0.3s;
            font-size: 16px;
        }
        
        .nav-tab:hover {
            background: #e9ecef;
        }
        
        .nav-tab.active {
            background: white;
            border-bottom: 3px solid #4CAF50;
            color: #4CAF50;
        }
        
        .tab-content {
            display: none;
            padding: 30px;
            min-height: 600px;
        }
        
        .tab-content.active {
            display: block;
        }
        
        .upload-area {
            border: 2px dashed #4CAF50;
            border-radius: 10px;
            padding: 40px;
            text-align: center;
            margin: 20px 0;
            transition: all 0.3s;
            cursor: pointer;
        }
        
        .upload-area:hover {
            background: #f8fff8;
            border-color: #45a049;
        }
        
        .chat-container {
            height: 400px;
            border: 1px solid #ddd;
            border-radius: 10px;
            overflow-y: auto;
            padding: 20px;
            background: #f9f9f9;
            margin-bottom: 20px;
        }
        
        .message {
            margin: 10px 0;
            padding: 12px 18px;
            border-radius: 18px;
            max-width: 80%;
            word-wrap: break-word;
        }
        
        .user-message {
            background: #4CAF50;
            color: white;
            margin-left: auto;
        }
        
        .bot-message {
            background: #e9ecef;
            color: #333;
        }
        
        .input-group {
            display: flex;
            gap: 10px;
            margin: 10px 0;
            align-items: stretch;
        }
        
        input, textarea, select {
            padding: 12px;
            border: 1px solid #ddd;
            border-radius: 5px;
            font-size: 14px;
            font-family: inherit;
        }
        
        input[type="file"] {
            padding: 8px;
        }
        
        button {
            background: #4CAF50;
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 5px;
            cursor: pointer;
            font-weight: 500;
            transition: all 0.3s;
            font-size: 14px;
        }
        
        button:hover {
            background: #45a049;
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0,0,0,0.2);
        }
        
        button:disabled {
            background: #ccc;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }
        
        .status {
            padding: 15px;
            border-radius: 5px;
            margin: 10px 0;
            font-weight: 500;
        }
        
        .status.success {
            background: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }
        
        .status.error {
            background: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }
        
        .status.info {
            background: #d1ecf1;
            color: #0c5460;
            border: 1px solid #bee5eb;
        }
        
        .architecture-diagram {
            text-align: center;
            margin: 20px 0;
        }
        
        .flow-step {
            display: inline-block;
            background: #f8f9fa;
            padding: 20px;
            margin: 10px;
            border-radius: 10px;
            border-left: 4px solid #4CAF50;
            min-width: 200px;
            vertical-align: top;
        }
        
        .flow-step h4 {
            color: #4CAF50;
            margin-bottom: 10px;
        }
        
        .metrics {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }
        
        .metric-card {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 10px;
            text-align: center;
            border: 1px solid #e9ecef;
        }
        
        .metric-value {
            font-size: 2.5em;
            font-weight: bold;
            color: #4CAF50;
            margin-bottom: 5px;
        }
        
        .code-snippet {
            background: #1e1e1e;
            color: #d4d4d4;
            padding: 20px;
            border-radius: 10px;
            margin: 15px 0;
            overflow-x: auto;
            font-family: 'Courier New', monospace;
            font-size: 13px;
            line-height: 1.4;
        }
        
        .pipeline-status {
            display: flex;
            justify-content: space-between;
            align-items: center;
            background: #f8f9fa;
            padding: 15px;
            border-radius: 10px;
            margin: 10px 0;
            border: 1px solid #e9ecef;
        }
        
        .status-indicator {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            margin-right: 10px;
        }
        
        .status-indicator.completed {
            background: #4CAF50;
        }
        
        .status-indicator.processing {
            background: #ff9800;
            animation: pulse 1.5s infinite;
        }
        
        .status-indicator.pending {
            background: #ccc;
        }
        
        @keyframes pulse {
            0% { opacity: 1; }
            50% { opacity: 0.5; }
            100% { opacity: 1; }
        }
        
        .demo-data {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 10px;
            margin: 10px 0;
            border-left: 4px solid #17a2b8;
        }
        
        .extracted-fields {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 15px;
            margin-top: 15px;
        }
        
        .field-item {
            background: white;
            padding: 15px;
            border-radius: 8px;
            border-left: 4px solid #4CAF50;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        
        .field-item strong {
            color: #4CAF50;
        }
        
        .predefined-questions {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 10px;
            margin-top: 15px;
        }
        
        .predefined-questions button {
            background: #f8f9fa;
            color: #495057;
            border: 1px solid #dee2e6;
            text-align: left;
            padding: 10px 15px;
            font-size: 13px;
        }
        
        .predefined-questions button:hover {
            background: #e9ecef;
            color: #4CAF50;
            border-color: #4CAF50;
        }
        
        .file-info {
            margin-top: 15px;
            padding: 15px;
            background: #e8f5e8;
            border-radius: 8px;
            border: 1px solid #c3e6cb;
        }
        
        .tech-stack {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }
        
        .tech-card {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 10px;
            text-align: center;
            border: 1px solid #e9ecef;
        }
        
        .tech-card h4 {
            color: #4CAF50;
            margin-bottom: 10px;
        }
        
        @media (max-width: 768px) {
            .nav-tabs {
                flex-direction: column;
            }
            
            .nav-tab {
                border-bottom: 1px solid #dee2e6;
            }
            
            .flow-step {
                display: block;
                margin: 10px 0;
            }
            
            .container {
                margin: 10px;
                border-radius: 10px;
            }
            
            .tab-content {
                padding: 20px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üöÄ GenAI NLP Intelligence Platform</h1>
            <p>Enterprise Document Processing & Intelligent Q&A System</p>
            <p style="font-size: 0.9em; margin-top: 10px; opacity: 0.8;">
                Demo Version - Built for McKesson Interview
            </p>
        </div>
        
        <div class="nav-tabs">
            <button class="nav-tab active" onclick="showTab('upload')">üìÑ Document Upload</button>
            <button class="nav-tab" onclick="showTab('chat')">üí¨ AI Chat</button>
            <button class="nav-tab" onclick="showTab('pipeline')">‚ö° Processing Pipeline</button>
            <button class="nav-tab" onclick="showTab('architecture')">üèóÔ∏è Architecture</button>
        </div>
        
        <!-- Upload Tab -->
        <div id="upload" class="tab-content active">
            <h2>üì§ Document Upload & Processing</h2>
            <p style="margin-bottom: 20px; color: #666;">Upload insurance documents, medical records, or financial statements for AI-powered analysis.</p>
            
            <div class="input-group">
                <input type="text" id="ssn" placeholder="Enter SSN (e.g., 123-45-6789)" style="flex: 1;">
                <select id="docType" style="flex: 1;">
                    <option value="insurance">Insurance Document</option>
                    <option value="medical">Medical Record</option>
                    <option value="financial">Financial Statement</option>
                </select>
            </div>
            
            <div class="upload-area" onclick="document.getElementById('fileInput').click()">
                <input type="file" id="fileInput" style="display: none;" accept=".pdf,.doc,.docx,.txt" onchange="handleFileSelect(this)">
                <h3>üìÅ Drop files here or click to browse</h3>
                <p>Supported formats: PDF, DOC, DOCX, TXT</p>
                <p style="margin-top: 10px; font-size: 0.9em; color: #666;">
                    Max file size: 10MB | Processing time: ~30 seconds
                </p>
                <div id="fileInfo"></div>
            </div>
            
            <button onclick="simulateUpload()" id="uploadBtn" disabled>üöÄ Upload & Process Document</button>
            
            <div id="uploadStatus"></div>
            
            <div class="demo-data">
                <h4>üìã Extracted Key Fields (Live Demo)</h4>
                <p style="margin-bottom: 15px; color: #666;">Document Intelligence automatically extracts structured data:</p>
                <div id="extractedFields"></div>
            </div>
        </div>
        
        <!-- Chat Tab -->
        <div id="chat" class="tab-content">
            <h2>ü§ñ AI-Powered Q&A System</h2>
            <p style="margin-bottom: 20px; color: #666;">Ask questions about your uploaded documents using natural language.</p>
            
            <div class="input-group">
                <input type="text" id="currentSSN" placeholder="SSN" readonly style="flex: 0 0 150px; background: #f8f9fa;">
                <select id="queryType" style="flex: 0 0 200px;">
                    <option value="general">General Query</option>
                    <option value="benefits">Benefits Information</option>
                    <option value="coverage">Coverage Details</option>
                    <option value="claims">Claims Status</option>
                </select>
            </div>
            
            <div class="chat-container" id="chatMessages">
                <div class="message bot-message">
                    üëã Hello! I'm your AI assistant powered by advanced NLP. I can help you understand your documents and answer questions about your insurance plans, benefits, and coverage details.
                    <br><br>
                    <strong>Try asking:</strong> "What is my deductible?" or "How do I file a claim?"
                </div>
            </div>
            
            <div class="input-group">
                <textarea id="userInput" placeholder="Ask a question about your documents..." rows="2" style="flex: 1; resize: vertical;" onkeypress="handleEnterKey(event)"></textarea>
                <button onclick="askQuestion()">Send üì§</button>
            </div>
            
            <div class="predefined-questions">
                <button onclick="askPredefinedQuestion('What is my plan name and coverage type?')">üè• Plan Details</button>
                <button onclick="askPredefinedQuestion('What are my deductibles and co-payments?')">üí∞ Costs & Deductibles</button>
                <button onclick="askPredefinedQuestion('What providers are in my network?')">üë©‚Äç‚öïÔ∏è Network Providers</button>
                <button onclick="askPredefinedQuestion('How do I file a claim?')">üìã Claims Process</button>
            </div>
        </div>
        
        <!-- Pipeline Tab -->
        <div id="pipeline" class="tab-content">
            <h2>‚ö° Real-time Processing Pipeline</h2>
            <p style="margin-bottom: 20px; color: #666;">Monitor document processing status and system metrics in real-time.</p>
            
            <div class="metrics">
                <div class="metric-card">
                    <div class="metric-value" id="processedDocs">0</div>
                    <div>Documents Processed</div>
                </div>
                <div class="metric-card">
                    <div class="metric-value" id="extractedFields">0</div>
                    <div>Fields Extracted</div>
                </div>
                <div class="metric-card">
                    <div class="metric-value" id="vectorChunks">0</div>
                    <div>Vector Chunks Created</div>
                </div>
                <div class="metric-card">
                    <div class="metric-value" id="queryAccuracy">95%</div>
                    <div>Query Accuracy</div>
                </div>
            </div>
            
            <h3>üìä Pipeline Processing Steps</h3>
            <div id="pipelineSteps">
                <div class="pipeline-status">
                    <div style="display: flex; align-items: center;">
                        <div class="status-indicator pending"></div>
                        <span><strong>1. Document Intelligence</strong> - Extract structured data and key fields</span>
                    </div>
                    <span>Pending</span>
                </div>
                <div class="pipeline-status">
                    <div style="display: flex; align-items: center;">
                        <div class="status-indicator pending"></div>
                        <span><strong>2. Text Chunking</strong> - Split content into semantic chunks</span>
                    </div>
                    <span>Pending</span>
                </div>
                <div class="pipeline-status">
                    <div style="display: flex; align-items: center;">
                        <div class="status-indicator pending"></div>
                        <span><strong>3. Vector Embedding</strong> - Create high-dimensional vectors</span>
                    </div>
                    <span>Pending</span>
                </div>
                <div class="pipeline-status">
                    <div style="display: flex; align-items: center;">
                        <div class="status-indicator pending"></div>
                        <span><strong>4. Index Storage</strong> - Store in FAISS vector database</span>
                    </div>
                    <span>Pending</span>
                </div>
                <div class="pipeline-status">
                    <div style="display: flex; align-items: center;">
                        <div class="status-indicator pending"></div>
                        <span><strong>5. Ready for Queries</strong> - Enable intelligent Q&A interface</span>
                    </div>
                    <span>Pending</span>
                </div>
            </div>
            
            <h3>üîó API Endpoints</h3>
            <div class="code-snippet">
<pre>// Document Upload API
POST /api/upload
Content-Type: multipart/form-data
{
  "file": document.pdf,
  "ssn": "123-45-6789",
  "document_type": "insurance"
}

// Query Processing API  
POST /api/ask-question
Content-Type: application/json
{
  "query": "What is my deductible?",
  "ssn": "123-45-6789",
  "use_vector_search": true,
  "include_metadata": true
}

// Pipeline Status API
GET /api/pipeline-status/{ssn}
Response: {
  "status": "completed",
  "extracted_fields": 15,
  "vector_chunks": 42,
  "processing_time": "2.3s"
}</pre>
            </div>
        </div>
        
        <!-- Architecture Tab -->
        <div id="architecture" class="tab-content">
            <h2>üèóÔ∏è System Architecture Overview</h2>
            <p style="margin-bottom: 20px; color: #666;">Enterprise-grade microservices architecture with modern NLP capabilities.</p>
            
            <div class="architecture-diagram">
                <div class="flow-step">
                    <h4>üåê React Frontend</h4>
                    <p>‚Ä¢ File Upload Interface<br>‚Ä¢ Real-time Chat UI<br>‚Ä¢ Status Monitoring<br>‚Ä¢ Responsive Design</p>
                </div>
                <div style="display: inline-block; margin: 20px; font-size: 2em; color: #4CAF50;">‚¨á</div>
                <div class="flow-step">
                    <h4>‚ö° FastAPI Backend</h4>
                    <p>‚Ä¢ RESTful APIs<br>‚Ä¢ Async Processing<br>‚Ä¢ Background Tasks<br>‚Ä¢ Error Handling</p>
                </div>
                <div style="display: inline-block; margin: 20px; font-size: 2em; color: #4CAF50;">‚¨á</div>
                <div class="flow-step">
                    <h4>üß† NLP Pipeline</h4>
                    <p>‚Ä¢ Document Intelligence<br>‚Ä¢ Vector Embeddings<br>‚Ä¢ Similarity Search<br>‚Ä¢ LLM Integration</p>
                </div>
            </div>
            
            <h3>üíª Frontend Code Examples</h3>
            <div class="code-snippet">
<pre>// React Upload Component
const handleUpload = async () => {
  const formData = new FormData();
  formData.append("file", selectedFile);
  formData.append("ssn", ssn);
  
  const response = await fetch("/api/upload", {
    method: "POST",
    body: formData
  });
  
  if (response.ok) {
    setStatus("Document uploaded successfully!");
    navigate("/chat");
  }
};

// Chat Interface with Real-time Updates
const askQuestion = async (query) => {
  const response = await fetch("/api/ask-question", {
    method: "POST",
    headers: { "Content-Type": "application/json" },
    body: JSON.stringify({ 
      query: userInput, 
      ssn: currentSSN,
      use_enrichment: true 
    })
  });
  
  const data = await response.json();
  setMessages(prev => [...prev, {
    type: 'bot',
    content: data.answer,
    confidence: data.confidence
  }]);
};</pre>
            </div>
            
            <h3>üöÄ Backend Implementation</h3>
            <div class="code-snippet">
<pre># FastAPI Endpoints with Async Processing
from fastapi import FastAPI, UploadFile, File, Form
from langchain.text_splitter import CharacterTextSplitter
from langchain.embeddings import HuggingFaceEmbeddings
from langchain.vectorstores import FAISS

app = FastAPI()

@app.post("/api/upload")
async def upload_document(
    ssn: str = Form(...), 
    file: UploadFile = File(...)
):
    # Extract text content
    text_content = await extract_text_from_file(file)
    
    # Document Intelligence - Extract key fields
    extracted_fields = await extract_key_fields(text_content)
    
    # Store metadata in database
    await store_document_metadata(ssn, file.filename, extracted_fields)
    
    # Background processing pipeline
    background_tasks.add_task(process_document_pipeline, text_content, ssn)
    
    return {"status": "success", "message": "Document processed"}

@app.post("/api/ask-question") 
async def ask_question(request: QueryRequest):
    # Get user context from stored metadata
    user_context = await get_user_context(request.ssn)
    
    # Enrich query with extracted fields
    enriched_query = enrich_query_with_context(request.query, user_context)
    
    # Vector similarity search
    relevant_chunks = await vector_search(enriched_query, request.ssn)
    
    # Generate response using LLM
    response = await generate_response(
        query=enriched_query,
        context=relevant_chunks,
        user_metadata=user_context
    )
    
    return {
        "answer": response,
        "confidence": calculate_confidence(response),
        "sources": relevant_chunks
    }</pre>
            </div>
            
            <h3>ü§ñ NLP Pipeline Implementation</h3>
            <div class="code-snippet">
<pre># Advanced NLP Processing Pipeline
def process_document_pipeline(text_content: str, ssn: str):
    # Step 1: Intelligent Text Chunking
    splitter = RecursiveCharacterTextSplitter(
        chunk_size=500,
        chunk_overlap=50,
        separators=["\n\n", "\n", " ", ""]
    )
    chunks = splitter.split_text(text_content)
    
    # Step 2: Generate Embeddings (Enterprise Alternative)
    embeddings = HuggingFaceEmbeddings(
        model_name="sentence-transformers/all-MiniLM-L6-v2"
    )
    
    # Step 3: Create Vector Store with Metadata
    vector_store = FAISS.from_texts(
        texts=chunks,
        embedding=embeddings,
        metadatas=[{"ssn": ssn, "chunk_id": i} 
                  for i in range(len(chunks))]
    )
    
    # Step 4: Persistent Storage
    vector_store.save_local(f"vectors/{ssn}")
    
    return {"chunks": len(chunks), "status": "completed"}

# Intelligent Query Processing
def generate_response(query: str, context: list, user_metadata: dict):
    # Context-aware prompt engineering
    prompt = f"""
    Based on the user's {user_metadata.get('plan_type', 'insurance')} document:
    Context: {context}
    User Info: {user_metadata}
    
    Question: {query}
    
    Provide accurate, helpful response based on the document content.
    """
    
    # Integration ready for:
    # - Azure OpenAI
    # - Hugging Face Transformers  
    # - Local LLM deployment
    
    return process_with_llm(prompt)</pre>
            </div>
            
            <h3>üõ†Ô∏è Technology Stack</h3>
            <div class="tech-stack">
                <div class="tech-card">
                    <h4>Frontend</h4>
                    <p>React 18<br>TypeScript<br>Tailwind CSS<br>Axios</p>
                </div>
                <div class="tech-card">
                    <h4>Backend</h4>
                    <p>FastAPI<br>Python 3.11<br>Async/Await<br>Pydantic</p>
                </div>
                <div class="tech-card">
                    <h4>NLP/AI</h4>
                    <p>LangChain<br>HuggingFace<br>FAISS<br>Transformers</p>
                </div>
                <div class="tech-card">
                    <h4>Database</h4>
                    <p>PostgreSQL<br>MongoDB<br>Redis<br>Vector Store</p>
                </div>
                <div class="tech-card">
                    <h4>DevOps</h4>
                    <p>Docker<br>GitHub Actions<br>AWS/Azure<br>Kubernetes</p>
                </div>
                <div class="tech-card">
                    <h4>Monitoring</h4>
                    <p>Prometheus<br>Grafana<br>ELK Stack<br>DataDog</p>
                </div>
            </div>
            
            <div style="margin-top: 30px; padding: 20px; background: #f8f9fa; border-radius: 10px; border-left: 4px solid #4CAF50;">
                <h4>üöÄ Production Ready Features:</h4>
                <ul style="margin-top: 10px; margin-left: 20px;">
                    <li>Horizontal scaling with microservices architecture</li>
                    <li>Real-time processing with WebSocket support</li>
                    <li>Enterprise security with encryption and RBAC</li>
                    <li>Multi-tenant data isolation by SSN</li>
                    <li>Comprehensive logging and monitoring</li>
                    <li>CI/CD pipeline with automated testing</li>
                </ul>
            </div>
        </div>
    </div>

    <script>
        // Global state management
        let currentUser = null;
        let processedDocuments = {};
        let chatHistory = [];
        
        // Demo data for realistic presentation
        const demoExtractedFields = {
            "PlanName": "Silver PPO Health Plan",
            "PlanType": "PPO",
            "Deductible": "$2,500",
            "CoPayment": "$25 Primary Care, $50 Specialist",
            "OutOfPocketMax": "$8,000",
            "NetworkProviders": "Blue Cross Blue Shield Network",
            "EffectiveDate": "2024-01-01",
            "ExpirationDate": "2024-12-31"
        };
        
        // Intelligent response system
        const demoResponses = {
            "What is my plan name and coverage type?": "Based on your uploaded document, you have a **Silver PPO Health Plan**. This is a Preferred Provider Organization (PPO) plan, which means you have flexibility to see both in-network and out-of-network providers, though you'll pay less when you stay in-network.\n\n‚úÖ **Key Benefits:** Lower costs in-network, no referral required for specialists, nationwide coverage.",
            
            "What are my deductibles and co-payments?": "Your plan details show:\n\nüí∞ **Cost Structure:**\n‚Ä¢ **Annual Deductible**: $2,500\n‚Ä¢ **Primary Care Co-pay**: $25\n‚Ä¢ **Specialist Co-pay**: $50\n‚Ä¢ **Out-of-Pocket Maximum**: $8,000\n\nOnce you meet your deductible, your plan will cover a higher percentage of your medical costs. The out-of-pocket maximum protects you from excessive medical expenses in a single year.",
            
            "What providers are in my network?": "Your plan uses the **Blue Cross Blue Shield Network**, one of the largest provider networks in the United States.\n\nüè• **Network Access:**\n‚Ä¢ 90%+ of hospitals nationwide\n‚Ä¢ 95%+ of physicians\n‚Ä¢ Specialists in all major medical fields\n‚Ä¢ 24/7 telemedicine options\n\nYou can search for in-network providers using the BCBS website or mobile app to ensure you receive maximum benefits.",
            
            "How do I file a claim?": "For your Silver PPO plan, most claims are filed automatically by your healthcare provider. However, if you need to file manually:\n\nüìã **Claims Process:**\n1. **Obtain** itemized bills and receipts\n2. **Complete** the claim form from your insurance portal\n3. **Submit** within 90 days of service\n4. **Track** status through your online account\n5. **Receive** reimbursement within 30 days\n\nüí° **Pro Tip:** Keep all medical receipts and use the mobile app for faster claim submission."
        };
        
        // Tab navigation system
        function showTab(tabName) {
            // Hide all tabs
            document.querySelectorAll('.tab-content').forEach(tab => {
                tab.classList.remove('active');
            });
            document.querySelectorAll('.nav-tab').forEach(tab => {
                tab.classList.remove('active');
            });
            
            // Show selected tab
            document.getElementById(tabName).classList.add('active');
            event.target.classList.add('active');
        }
        
        // File upload handling
        function handleFileSelect(input) {
            const file = input.files[0];
            if (file) {
                const fileSizeKB = (file.size / 1024).toFixed(2);
                const fileDate = new Date(file.lastModified).toLocaleDateString();
                
                document.getElementById('fileInfo').innerHTML = `
                    <div class="file-info">
                        <strong>üìÑ Selected File:</strong> ${file.name}<br>
                        <strong>üìä File Size:</strong> ${fileSizeKB} KB<br>
                        <strong>üìÖ Last Modified:</strong> ${fileDate}<br>
                        <strong>üîß Status:</strong> Ready for processing
                    </div>
                `;
                document.getElementById('uploadBtn').disabled = false;
            }
        }
        
        // Simulate document upload and processing
        function simulateUpload() {
            const ssn = document.getElementById('ssn').value;
            const docType = document.getElementById('docType').value;
            const fileInput = document.getElementById('fileInput');
            
            if (!ssn || !fileInput.files[0]) {
                showStatus('error', '‚ùå Please provide SSN and select a file.');
                return;
            }
            
            // Validate SSN format
            if (!/^\d{3}-\d{2}-\d{4}$/.test(ssn)) {
                showStatus('error', '‚ùå Please enter SSN in format: 123-45-6789');
                return;
            }
            
            currentUser = ssn;
            document.getElementById('currentSSN').value = ssn;
            document.getElementById('uploadBtn').disabled = true;
            
            // Simulate realistic upload process
            const steps = [
                { message: 'üì§ Uploading document to secure server...', delay: 1000 },
                { message: 'üîç Running Document Intelligence analysis...', delay: 1500 },
                { message: 'üìä Extracting structured fields and metadata...', delay: 1200 },
                { message: 'üß† Creating semantic vector embeddings...', delay: 1800 },
                { message: 'üíæ Storing in vector database for fast retrieval...', delay: 1000 },
                { message: '‚úÖ Document processed successfully! Ready for Q&A.', delay: 500 }
            ];
            
            let currentStep = 0;
            
            function processStep() {
                if (currentStep < steps.length) {
                    const step = steps[currentStep];
                    const isLast = currentStep === steps.length - 1;
                    
                    showStatus(isLast ? 'success' : 'info', step.message);
                    
                    if (isLast) {
                        displayExtractedFields();
                        updatePipelineStatus();
                        updateMetrics();
                        document.getElementById('uploadBtn').disabled = false;
                    }
                    
                    currentStep++;
                    if (!isLast) {
                        setTimeout(processStep, step.delay);
                    }
                } 
            }
            
            processStep();
        }
        
        // Display processing status
        function showStatus(type, message) {
            const statusDiv = document.getElementById('uploadStatus');
            statusDiv.innerHTML = `<div class="status ${type}">${message}</div>`;
        }
        
        // Display extracted fields with animation
        function displayExtractedFields() {
            const fieldsDiv = document.getElementById('extractedFields');
            let fieldsHtml = '<div class="extracted-fields">';
            
            for (const [key, value] of Object.entries(demoExtractedFields)) {
                fieldsHtml += `
                    <div class="field-item">
                        <strong>${key}:</strong><br>
                        <span style="color: #666;">${value}</span>
                    </div>
                `;
            }
            fieldsHtml += '</div>';
            fieldsDiv.innerHTML = fieldsHtml;
        }
        
        // Update pipeline status with realistic timing
        function updatePipelineStatus() {
            const steps = document.querySelectorAll('.pipeline-status');
            
            steps.forEach((step, index) => {
                setTimeout(() => {
                    const indicator = step.querySelector('.status-indicator');
                    const statusText = step.querySelector('span:last-child');
                    
                    // Processing state
                    indicator.className = 'status-indicator processing';
                    statusText.textContent = 'Processing...';
                    
                    // Completed state
                    setTimeout(() => {
                        indicator.className = 'status-indicator completed';
                        statusText.textContent = 'Completed ‚úì';
                    }, 1200);
                }, index * 1400);
            });
        }
        
        // Update metrics dashboard
        function updateMetrics() {
            setTimeout(() => {
                document.getElementById('processedDocs').textContent = '1';
            }, 1000);
            
            setTimeout(() => {
                document.getElementById('extractedFields').textContent = Object.keys(demoExtractedFields).length;
            }, 2000);
            
            setTimeout(() => {
                document.getElementById('vectorChunks').textContent = '42';
            }, 3000);
            
            setTimeout(() => {
                document.getElementById('queryAccuracy').textContent = '97%';
            }, 4000);
        }
        
        // Chat functionality
        function askQuestion() {
            const query = document.getElementById('userInput').value.trim();
            if (!query) return;
            
            if (!currentUser) {
                alert('‚ö†Ô∏è Please upload a document first to enable AI chat!');
                return;
            }
            
            addMessage('user', query);
            document.getElementById('userInput').value = '';
            
            // Simulate AI processing
            setTimeout(() => {
                addMessage('bot', 'ü§î Analyzing your question and searching through document content...');
                
                setTimeout(() => {
                    // Remove processing message
                    const messages = document.getElementById('chatMessages');
                    messages.removeChild(messages.lastChild);
                    
                    // Generate intelligent response
                    const response = demoResponses[query] || generateSmartResponse(query);
                    addMessage('bot', response);
                }, 2500);
            }, 500);
        }
        
        // Handle predefined questions
        function askPredefinedQuestion(question) {
            document.getElementById('userInput').value = question;
            askQuestion();
        }
        
        // Handle Enter key in chat
        function handleEnterKey(event) {
            if (event.key === 'Enter' && !event.shiftKey) {
                event.preventDefault();
                askQuestion();
            }
        }
        
        // Generate contextual responses
        function generateSmartResponse(query) {
            const queryLower = query.toLowerCase();
            const planName = demoExtractedFields.PlanName;
            
            if (queryLower.includes('cost') || queryLower.includes('price') || queryLower.includes('premium')) {
                return `Based on your ${planName}, here are the key cost details:\n\nüí∞ **Your Costs:**\n‚Ä¢ Annual Deductible: $2,500\n‚Ä¢ Primary Care: $25 co-pay\n‚Ä¢ Specialist Visit: $50 co-pay\n‚Ä¢ Out-of-Pocket Max: $8,000\n\nüìä *Analysis based on your uploaded document using NLP extraction.*`;
            }
            
            if (queryLower.includes('cover') || queryLower.includes('benefit')) {
                return `Your ${planName} provides comprehensive coverage including:\n\nüè• **Covered Services:**\n‚Ä¢ Preventive care (100% covered)\n‚Ä¢ Emergency services\n‚Ä¢ Prescription drugs\n‚Ä¢ Mental health services\n‚Ä¢ Maternity care\n\nüìã *Detailed benefits extracted from your policy document.*`;
            }
            
            if (queryLower.includes('emergency') || queryLower.includes('urgent')) {
                return `For emergency situations with your ${planName}:\n\nüö® **Emergency Care:**\n‚Ä¢ Call 911 for life-threatening emergencies\n‚Ä¢ Emergency room visits covered after deductible\n‚Ä¢ Urgent care: $50 co-pay\n‚Ä¢ 24/7 nurse hotline available\n\n‚ö° *Emergency procedures based on your plan terms.*`;
            }
            
            // Generic intelligent response
            const responses = [
                `I've analyzed your ${planName} document for information about "${query}". Based on the extracted data and policy terms, your plan provides specific coverage details that I can explain further.`,
                `Using NLP analysis of your uploaded document, I found relevant information about "${query}". Your ${planName} includes provisions for this topic in your policy coverage.`,
                `Based on the semantic search through your document content regarding "${query}", your insurance plan has specific terms and conditions that apply to your situation.`
            ];
            
            const randomResponse = responses[Math.floor(Math.random() * responses.length)];
            return randomResponse + `\n\nü§ñ *Response generated using advanced NLP pipeline with vector similarity search and context enrichment.*`;
        }
        
        // Add message to chat
        function addMessage(type, content) {
            const messagesContainer = document.getElementById('chatMessages');
            const messageDiv = document.createElement('div');
            messageDiv.className = `message ${type}-message`;
            
            // Convert markdown-style formatting
            const formattedContent = content
                .replace(/\*\*(.*?)\*\*/g, '<strong>$1</strong>')
                .replace(/\n/g, '<br>');
                
            messageDiv.innerHTML = formattedContent;
            messagesContainer.appendChild(messageDiv);
            messagesContainer.scrollTop = messagesContainer.scrollHeight;
        }
        
        // Initialize demo with dynamic content
        document.addEventListener('DOMContentLoaded', function() {
            // Add some demo activity after page load
            setTimeout(() => {
                document.getElementById('queryAccuracy').textContent = '95%';
            }, 2000);
            
            // Show welcome message with typing effect
            setTimeout(() => {
                const welcomeMsg = "üí° **Pro Tip:** Upload a document first, then try asking specific questions about your plan details, costs, or coverage!";
                addMessage('bot', welcomeMsg);
            }, 1000);
        });
        
        // Add smooth scrolling for better UX
        document.querySelectorAll('.nav-tab').forEach(tab => {
            tab.addEventListener('click', function() {
                document.querySelector('.container').scrollIntoView({ 
                    behavior: 'smooth', 
                    block: 'start' 
                });
            });
        });
    </script>
</body>
</html>
